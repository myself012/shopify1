<div class="newsletter section center">
  <div class="newsletter__wrapper color-{{ section.settings.color_scheme }} gradient">
    <div class="newsletter__content">
      <h2 class="h2">{{ section.settings.heading }}</h2>
      <div class="rte">{{ section.settings.text }}</div>
      
      {%- form 'customer', class: 'newsletter-form' -%}
        <input type="hidden" name="contact[tags]" value="newsletter">
        <div class="newsletter-form__field-wrapper">
          <div class="input-group">
            <input
              id="NewsletterForm--{{ section.id }}"
              type="email"
              name="contact[email]"
              class="input-field"
              value="{{ form.email }}"
              aria-required="true"
              autocorrect="off"
              autocapitalize="off"
              autocomplete="email"
              placeholder="Email address"
              required
            >
            <button type="submit" class="button" name="commit" id="Subscribe">
              Subscribe
            </button>
          </div>
          {%- if form.errors -%}
            <small class="newsletter-form__message form__message" id="Newsletter-error--{{ section.id }}">
              {{ form.errors.translated_fields['email'] | capitalize }} {{ form.errors.messages['email'] }}
            </small>
          {%- endif -%}
        </div>
        {%- if form.posted_successfully? -%}
          <h3 class="newsletter-form__message newsletter-form__message--success form__message" id="Newsletter-success--{{ section.id }}" tabindex="-1" autofocus>
            Thanks for subscribing!
          </h3>
        {%- endif -%}
      {%- endform -%}
    </div>
  </div>
</div>

<style>
  .newsletter__wrapper {
    padding: 60px 20px;
    background-color: var(--color-secondary);
    color: #fff;
    border-radius: var(--border-radius);
    margin: 40px auto;
    max-width: 800px;
  }
  .newsletter h2 {
    color: #fff;
  }
  .newsletter-form {
    max-width: 500px;
    margin: 20px auto 0;
  }
</style>

{% schema %}
{
  "name": "Newsletter",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Subscribe to our emails"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Description",
      "default": "<p>Be the first to know about new collections and exclusive offers.</p>"
    }
  ],
  "presets": [
    {
      "name": "Newsletter"
    }
  ]
}
{% endschema %}
